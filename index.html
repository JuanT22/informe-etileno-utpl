<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>¬øQuieres ser mi San Valent√≠n?</title>
  <style>
    :root{
      --bg-start:#ff9a9e;
      --bg-end:#fad0c4;
      --card:#fff;
      --accent:#ff4d6d;
      --soft:#ffeef0;
    }
    html,body{
      height:100%;
      margin:0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      background: linear-gradient(160deg,var(--bg-start),var(--bg-end));
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* Phone-ish container */
    .phone {
      width: 380px;
      max-width:94vw;
      height: 760px;
      max-height:92vh;
      border-radius: 36px;
      box-shadow: 0 18px 50px rgba(0,0,0,0.25);
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      padding:18px;
      position:relative;
      overflow:hidden;
      border: 6px solid rgba(255,255,255,0.12);
      backdrop-filter: blur(6px);
    }

    header{
      display:flex;
      justify-content:center;
      gap:10px;
      align-items:center;
      margin-bottom:12px;
    }
    .dot{ width:10px; height:10px; border-radius:50%; background:rgba(255,255,255,0.6);}
    h1{
      margin:0; font-size:18px; color:white; font-weight:700;
      text-shadow: 0 2px 6px rgba(0,0,0,0.25);
    }

    main{
      background: linear-gradient(180deg, rgba(255,255,255,0.9), #fff);
      height:calc(100% - 70px);
      border-radius: 20px;
      padding:18px;
      box-sizing:border-box;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      text-align:center;
    }

    .card-title{
      font-size:22px;
      margin:0 0 6px 0;
      color:#333;
    }
    .card-sub{
      margin:0 0 18px 0;
      color:#666;
      font-size:14px;
    }

    .heart{
      font-size:64px;
      transform:scale(1);
      animation: pulse 1.6s infinite;
      margin-bottom:12px;
    }
    @keyframes pulse{
      0%{ transform:scale(1); }
      50%{ transform:scale(1.12); }
      100%{ transform:scale(1); }
    }

    .btns{
      display:flex;
      gap:12px;
      margin-top:10px;
      align-items:center;
    }

    button{
      border:0;
      padding:12px 18px;
      border-radius:999px;
      font-size:16px;
      font-weight:700;
      box-shadow: 0 6px 18px rgba(0,0,0,0.12);
      cursor:pointer;
      user-select:none;
      touch-action:manipulation;
    }

    .yes{
      background: linear-gradient(90deg, #ff7a95, #ff4d6d);
      color:white;
      min-width:110px;
    }

    .no{
      background:transparent;
      color:#ff4d6d;
      border: 2px solid rgba(255,77,109,0.18);
      min-width:110px;
    }

    /* modal overlay (blocking until yes) */
    .overlay{
      position:absolute;
      inset:0;
      background:transparent;
      pointer-events:none;
    }

    /* small playful message area */
    .note {
      margin-top:14px;
      font-size:13px;
      color:#b44;
      min-height:20px;
    }

    /* success screen */
    .success {
      position:absolute;
      inset:0;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      background: linear-gradient(180deg, rgba(255,255,255,0.96), #fff);
      z-index:40;
      padding:22px;
      gap:12px;
      text-align:center;
      transform:translateY(100%);
      transition: transform 420ms cubic-bezier(.2,.9,.3,1);
    }
    .success.show { transform: translateY(0%); }
    .success h2 { margin:0; color:var(--accent); font-size:24px; }
    .success p { margin:0; color:#444; font-size:15px; }

    /* floating hearts */
    .heart-float {
      position:absolute;
      width:22px;
      height:22px;
      font-size:22px;
      pointer-events:none;
      animation: floatUp 4s linear forwards;
      filter: drop-shadow(0 6px 12px rgba(0,0,0,0.08));
    }
    @keyframes floatUp {
      0% { transform: translateY(0) scale(0.9); opacity:1; }
      100% { transform: translateY(-420px) scale(1.2); opacity:0; }
    }

    /* small responsive tweaks */
    @media (max-width:420px){
      .phone{ height:86vh; border-radius:28px; padding:14px; }
      .heart{ font-size:56px; }
    }
  </style>
</head>
<body>
  <div class="phone" role="application" aria-label="Tarjeta de San Valent√≠n">
    <header>
      <div class="dot"></div><div class="dot"></div><div class="dot"></div>
      <h1>Para la persona que me hace sonre√≠r</h1>
    </header>

    <main>
      <div class="heart" aria-hidden="true">üíó</div>
      <h2 class="card-title">¬øQuieres ser mi San Valent√≠n?</h2>
      <p class="card-sub">Prometo abrazos, risas y memes malos por 1 a√±o (o m√°s).</p>

      <div class="btns" aria-hidden="false">
        <button class="yes" id="yesBtn">¬°S√≠, claro! üòç</button>
        <button class="no" id="noBtn">No... üòÖ</button>
      </div>

      <div class="note" id="note"></div>
    </main>

    <!-- success screen (hidden until yes) -->
    <div class="success" id="success">
      <div style="font-size:64px;">üéâüíñ</div>
      <h2>¬°Dijiste que s√≠! ‚ú®</h2>
      <p>Gracias por hacerme la persona m√°s feliz hoy. Te prometo ‚ù§Ô∏è, aventuras y muchas palomitas.</p>
      <div style="margin-top:10px;">
        <button class="yes" id="doneBtn">¬°Abrazos ahora! ü§ó</button>
      </div>
    </div>

    <!-- overlay to trap until yes -->
    <div class="overlay" id="overlay" aria-hidden="false"></div>
  </div>

  <script>
    // Elementos
    const yesBtn = document.getElementById('yesBtn');
    const noBtn = document.getElementById('noBtn');
    const note = document.getElementById('note');
    const success = document.getElementById('success');
    const overlay = document.getElementById('overlay');
    const doneBtn = document.getElementById('doneBtn');
    const phone = document.querySelector('.phone');

    // Evitamos que el overlay se quite: pointer-events en overlay es none (to allow clicks on buttons),
    // pero usaremos la l√≥gica para impedir cerrar la p√°gina sin tocar "S√≠".
    // Movemos el bot√≥n "No" a posiciones traviesas y convertimos el clic en un "reintento tierno".

    // Cuando el cursor/touch se acerque, el bot√≥n No se mueve
    function moveNoRandom() {
      const rect = phone.getBoundingClientRect();
      const maxX = rect.width - 120; // margen ancho del bot√≥n
      const maxY = rect.height - 180;
      const x = Math.max(8, Math.random() * maxX);
      const y = Math.max(120, Math.random() * maxY);
      noBtn.style.position = 'relative';
      noBtn.style.transform = `translate(${x - 20}px, ${y - 20}px)`;
    }

    // Peque√±a funci√≥n que hace corazones flotantes
    function spawnHeart(xPct = Math.random()*100) {
      const h = document.createElement('div');
      h.className = 'heart-float';
      h.style.left = `${xPct}%`;
      h.style.bottom = '10px';
      h.textContent = 'üíï';
      phone.appendChild(h);
      setTimeout(()=> h.remove(), 4200);
    }

    // Secuencia cuando presiona NO
    function onNoClicked(e){
      e.preventDefault();
      // mostrar mensaje tierno y "reintentar"
      const msgs = [
        "Pero sin ti Netflix no es lo mismo... üò¢",
        "¬øY qui√©n me dejar√° robar tus papas fritas? üçü",
        "Prometo cocinar (al menos intentarlo) ü•≤",
        "Mis abrazos tienen garant√≠a extendida üòá",
        "Si dices que no, traigo m√°s flores ma√±ana üå∏"
      ];
      // elegir mensaje aleatorio
      const m = msgs[Math.floor(Math.random()*msgs.length)];
      note.textContent = m;

      // generar corazones
      for (let i=0;i<6;i++){
        setTimeout(()=> spawnHeart(10 + Math.random()*80), i*120);
      }

      // mover bot√≥n NO por travieso
      moveNoRandom();

      // despu√©s de 1.4s, restauramos nota y ponemos un "please" extra
      setTimeout(()=>{
        note.textContent = "Int√©ntalo de nuevo... (yo espero) üí´";
      }, 1400);

      // si logra hacer click, lo convertimos en un "no aceptado" que no cierra nada:
      // nada m√°s ocurre; la idea es que la experiencia sea juguetona hasta que pulse "S√≠".
    }

    // Hacemos dif√≠cil tocar No en m√≥viles (mientras se mueve al tocar)
    noBtn.addEventListener('mouseenter', moveNoRandom);
    noBtn.addEventListener('touchstart', function(e){
      // en touch, evitamos que el bot√≥n sea presionado f√°cilmente
      e.preventDefault();
      moveNoRandom();
      onNoClicked(e);
    }, {passive:false});
    noBtn.addEventListener('click', onNoClicked);

    // Si hace click en S√≠ -> pantalla de √©xito
    yesBtn.addEventListener('click', function(e){
      e.preventDefault();
      note.textContent = "¬°Eres la mejor decisi√≥n! üíñ";
      success.classList.add('show');

      // lluvia de corazones m√°s intensa
      for (let i=0;i<18;i++){
        setTimeout(()=> spawnHeart(5 + Math.random()*90), i*120);
      }

      // opcional: cambiar t√≠tulo de la ventana (para cuando revise mensajes)
      document.title = "Dijo que s√≠ üíñ";
    });

    // Bot√≥n 'done' cierra la tarjeta (o puede redirigir a un abrazo virtual)
    doneBtn.addEventListener('click', function(){
      // Aqu√≠ cerramos la tarjeta visualmente (pero sigue en el archivo)
      success.querySelector('p').textContent = "Te mando un abrazo enorme ahora mismo ü§ó";
      doneBtn.disabled = true;
      doneBtn.textContent = "¬°Abrazando...!";
    });

    // Peque√±o truco: cada pocos segundos hacemos que el "No" se mueva por s√≠ solo
    setInterval(() => {
      // solo mueve si no se mostr√≥ ya el √©xito
      if (!success.classList.contains('show')) moveNoRandom();
    }, 2200);

    // Touch friendly: permitir arrastrar el NO con el dedo (pero seguir√° siendo juguet√≥n)
    let dragging = false, startY = 0, startX = 0;
    noBtn.addEventListener('touchmove', (ev) => {
      ev.preventDefault();
      dragging = true;
      const t = ev.touches[0];
      const rect = phone.getBoundingClientRect();
      const x = Math.max(8, Math.min(rect.width - 120, t.clientX - rect.left - 50));
      const y = Math.max(120, Math.min(rect.height - 180, t.clientY - rect.top - 20));
      noBtn.style.transform = `translate(${x}px, ${y}px)`;
    }, {passive:false});

    noBtn.addEventListener('touchend', (ev) => {
      if (dragging) {
        dragging = false;
        note.textContent = "Jajaja, casi... üòú";
        setTimeout(()=> note.textContent = "", 1500);
        moveNoRandom();
      }
    });

    // peque√±o bloque para evitar recargas accidentales (la p√°gina espera respuesta)
    window.addEventListener('beforeunload', function (e) {
      // si ya dijo s√≠, permitimos salir sin mensaje
      if (success.classList.contains('show')) return undefined;
      // si no dijo s√≠, mostramos mensaje nativo (algunos navegadores ignoran)
      e.preventDefault();
      e.returnValue = '';
      return '';
    });

    // enfoque inicial - corazon pulso
    note.textContent = "Pulsa 'S√≠, claro! üòç' si quieres mi coraz√≥n ‚ô•";
    setTimeout(()=> note.textContent = "", 3000);
  </script>
</body>
</html>
